---
// src/components/Navbar.astro
interface Alt { lang: string; url: string }

const {
  lang = "th",
  showLinks = true,
  alternates = [] as Alt[],
} = Astro.props as {
  lang?: "th" | "en";
  showLinks?: boolean;
  alternates?: Alt[];
};

// หา URL ของภาษา
function altUrl(target: "th" | "en") {
  const found = alternates.find((a) => a.lang.toLowerCase() === target);
  if (found?.url) return found.url;
  return `/${target}`;
}
---

<nav class="bg-white/95 backdrop-blur-sm border-b border-gray-100 sticky top-0 z-50">
  <div class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      
      <!-- Logo -->
      <a href={`/${lang}`} class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center shadow-md">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7 14c-1.66 0-3 1.34-3 3 0 1.31.84 2.41 2 2.83V22h2v-2.17c1.16-.41 2-1.52 2-2.83 0-1.66-1.34-3-3-3zM20.5 6c-.28 0-.5.22-.5.5V8h-1V6.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5V8H4V6.5C4 6.22 3.78 6 3.5 6S3 6.22 3 6.5V18c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.28-.22-.5-.5-.5z" fill="white"/>
          </svg>
        </div>
        <span class="text-cyan-400 font-bold text-2xl">Bearly</span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-8">
        {showLinks && (
          <ul class="flex items-center gap-8">
            <li>
              <a href={`/${lang}`} class="text-gray-700 hover:text-cyan-500 transition-colors font-medium">
                {lang === "en" ? "Home" : "หน้าหลัก"}
              </a>
            </li>
            <li>
              <a href="#products" class="text-gray-700 hover:text-cyan-500 transition-colors font-medium">
                {lang === "en" ? "Products" : "ผลิตภัณฑ์"}
              </a>
            </li>
            <li>
              <a href="#about" class="text-gray-700 hover:text-cyan-500 transition-colors font-medium">
                {lang === "en" ? "About Us" : "เกี่ยวกับเรา"}
              </a>
            </li>
            <li>
              <a href="#contact" class="text-gray-700 hover:text-cyan-500 transition-colors font-medium">
                {lang === "en" ? "Contact" : "ติดต่อ"}
              </a>
            </li>
          </ul>
        )}

        <!-- Language Switcher -->
        <div class="flex items-center gap-1 bg-gray-100 rounded-full p-1">
          <a href={altUrl("th")}
             class={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${
               lang === "th" 
                 ? "bg-white text-gray-800 shadow-sm" 
                 : "text-gray-600 hover:text-gray-800"
             }`}>
            TH
          </a>
          <a href={altUrl("en")}
             class={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${
               lang === "en" 
                 ? "bg-white text-gray-800 shadow-sm" 
                 : "text-gray-600 hover:text-gray-800"
             }`}>
            EN
          </a>
        </div>
      </div>

      <!-- Mobile menu button -->
      <button 
        class="lg:hidden flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors"
        id="mobile-menu-button"
      >
        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600">
          <path d="M3 12h18M3 6h18M3 18h18"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation Menu -->
    <div class="lg:hidden hidden" id="mobile-menu">
      <div class="mt-4 p-4 bg-white rounded-xl shadow-lg border border-gray-100">
        {showLinks && (
          <ul class="space-y-3 mb-4">
            <li>
              <a href={`/${lang}`} class="block text-gray-700 hover:text-cyan-500 transition-colors font-medium py-2">
                {lang === "en" ? "Home" : "หน้าหลัก"}
              </a>
            </li>
            <li>
              <a href="#products" class="block text-gray-700 hover:text-cyan-500 transition-colors font-medium py-2">
                {lang === "en" ? "Products" : "ผลิตภัณฑ์"}
              </a>
            </li>
            <li>
              <a href="#about" class="block text-gray-700 hover:text-cyan-500 transition-colors font-medium py-2">
                {lang === "en" ? "About Us" : "เกี่ยวกับเรา"}
              </a>
            </li>
            <li>
              <a href="#contact" class="block text-gray-700 hover:text-cyan-500 transition-colors font-medium py-2">
                {lang === "en" ? "Contact" : "ติดต่อ"}
              </a>
            </li>
          </ul>
        )}
        
        <!-- Mobile Language Switcher -->
        <div class="flex gap-2 pt-3 border-t border-gray-100">
          <a href={altUrl("th")}
             class={`flex-1 text-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${
               lang === "th" 
                 ? "bg-cyan-500 text-white" 
                 : "bg-gray-100 text-gray-700 hover:bg-gray-200"
             }`}>
            ไทย
          </a>
          <a href={altUrl("en")}
             class={`flex-1 text-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${
               lang === "en" 
                 ? "bg-cyan-500 text-white" 
                 : "bg-gray-100 text-gray-700 hover:bg-gray-200"
             }`}>
            English
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', function() {
    const button = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');
    
    if (button && menu) {
      button.addEventListener('click', function() {
        menu.classList.toggle('hidden');
      });
      
      // Close menu when clicking outside
      document.addEventListener('click', function(e) {
        if (!button.contains(e.target) && !menu.contains(e.target)) {
          menu.classList.add('hidden');
        }
      });
    }
  });
</script>