---
import { wpQuery } from "../lib/wp";

export interface Props {
  lang: "th" | "en";
  class?: string;
}

const { lang, class: sectionClass = "" } = Astro.props;

const uriTh = "/";
const uriEn = "/en/welcome/";
const pageUri = lang === "en" ? uriEn : uriTh;

const FOOTER_QUERY = /* GraphQL */ `
  query FooterContact($uri: String!) {
    nodeByUri(uri: $uri) {
      __typename
      ... on Page {
        id
        contact { address contact subtitle }
      }
    }
  }
`;

let contact: { address?: string; contact?: string; subtitle?: string } = {};
try {
  const data = await wpQuery<any>(FOOTER_QUERY, { uri: pageUri });
  contact = data?.nodeByUri?.contact ?? {};
} catch {}

const googlePlay = "https://play.google.com/store/apps/details?id=com.bederly.phr";
const appStore = "https://apps.apple.com/th/app/id0000000000";
---

<footer class={`bg-white ${sectionClass}`.trim()}>
  <div class="container mx-auto px-6 py-16">
    <!-- Logo -->
    <div class="-mx-6 md:-mx-8 lg:-mx-12 mb-6">
      <div class="px-0">
        <img
          src="/footer.png"
          alt="Bederly"
          class="block h-20 md:h-24 w-auto object-contain"
        />
      </div>
    </div>

    <!-- 3 Columns: Address | Contact | Download Buttons -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-12 items-start">
      <!-- Address -->
      <div>
        <h3 class="font-semibold text-gray-800 text-base mb-3">Address</h3>
        <p class="text-sm text-gray-600 leading-relaxed">
          Bederly Co., Ltd.<br/>
          125/1 Moo 4, Ban Nong Pru<br/>
          Nong Chabok Subdistrict, Mueang<br/>
          Nakhon Ratchasima District<br/>
          Nakhon Ratchasima 30000, Thailand
        </p>
      </div>

      <!-- Contact -->
      <div>
        <h3 class="font-semibold text-gray-800 text-base mb-3">Contact</h3>
        <p class="text-sm text-gray-600 leading-relaxed mb-6">
          Phone: 084-826-3345<br/>
          Email: bederlyinfo@gmail.com
        </p>

        <!-- ทำให้เหมือนภาพตัวอย่าง: ตัวหนาทั้งบล็อก + บังคับตัดบรรทัด 3 บรรทัด -->
        <p class="text-sm text-gray-700 leading-relaxed font-bold">
          We create innovations and<br/>
          technologies to improve the quality of<br/>
          life, for you and your loved ones
        </p>
      </div>

      <!-- Download buttons (เดิม) -->
      <div class="flex flex-col gap-3 items-start md:items-end">
        <a href={googlePlay} target="_blank" rel="noopener noreferrer">
          <img src="/googleplay.png" alt="Get it on Google Play" class="h-12 w-auto" />
        </a>
        <a href={appStore} target="_blank" rel="noopener noreferrer">
          <img src="/Group.png" alt="Download on the App Store" class="h-12 w-auto" />
        </a>
      </div>
    </div>

    <!-- Copyright: ทำตัวหนา -->
    <div class="mt-10">
      <p class="text-sm text-gray-600 font-bold">
        © Copyright {new Date().getFullYear()} | Bederly Co.,Ltd.
      </p>
    </div>
  </div>
</footer>
