---
// src/components/Footer.astro
import { wpQuery } from "../lib/wp";

export interface Props {
  lang: "th" | "en";
  class?: string;
}

const { lang, class: sectionClass = "" } = Astro.props;
const isEN = lang === "en";

const uriTh = "/";
const uriEn = "/en/welcome/";
const pageUri = isEN ? uriEn : uriTh;

const FOOTER_QUERY = /* GraphQL */ `
  query FooterContact($uri: String!) {
    nodeByUri(uri: $uri) {
      __typename
      ... on Page {
        id
        contact { address contact subtitle }
      }
    }
  }
`;

let contact: { address?: string; contact?: string; subtitle?: string } = {};
try {
  const data = await wpQuery<any>(FOOTER_QUERY, { uri: pageUri });
  contact = data?.nodeByUri?.contact ?? {};
} catch {}

const googlePlay = "https://play.google.com/store/apps/details?id=com.bederly.phr";
const appStore   = "https://apps.apple.com/th/app/bederly-phr/id6747645978";
---

<!-- üåü FULL WIDTH FOOTER -->
<footer id="footer" class={`bg-white w-full ${sectionClass}`.trim()}>
  <!-- ‚≠ê full-bleed trick -->
  <div class="footer-bleed">
    <!-- ‚≠ê inner container -->
    <div class="footer-inner mx-auto w-full max-w-[1800px] px-4 md:px-10 pt-0 pb-12">


      <!-- Logo + social -->
      <div class="mb-10">
        <img
          src="/logo.png"
          alt="Bederly"
          class="favicon-logo block h-16 md:h-20 w-auto object-contain mb-2 ml-[-40px]"
        />

        <div id="footer-social-icons" class="flex items-center gap-3">
          <a href="https://www.facebook.com/Bederlyth/" target="_blank" rel="noopener noreferrer">
            <img src="/facebook.png" class="h-8 w-8" alt="Facebook" />
          </a>
          <a href="https://www.youtube.com/@bederly6974" target="_blank" rel="noopener noreferrer">
            <img src="/youtube.png" class="h-8 w-8" alt="YouTube" />
          </a>
          <a href="mailto:bederlyinfo@gmail.com">
            <img src="/mail.png" class="h-8 w-8" alt="Email" />
          </a>
        </div>
      </div>

      <!-- Grid columns -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
        <!-- Address -->
        <div>
          <h3 class="font-semibold text-gray-800 text-base mb-3">
            {isEN ? "Address" : "‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà"}
          </h3>

          {isEN ? (
            <p class="text-medium text-gray-600 leading-relaxed">
              Bederly Co., Ltd.<br/>
              125/1 Moo 4, Ban Nong Pru<br/>
              Nong Chabok Subdistrict, Mueang<br/>
              Nakhon Ratchasima District<br/>
              Nakhon Ratchasima 30000, Thailand
            </p>
          ) : (
            <p class="text-medium text-gray-600 leading-relaxed">
              ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÄ‡∏ö‡∏î‡πÄ‡∏î‡∏≠‡∏•‡∏µ‡πà ‡∏à‡∏≥‡∏Å‡∏±‡∏î<br/>
              125/1 ‡∏´‡∏°‡∏π‡πà 4 ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡∏£‡∏π<br/>
              ‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏à‡∏∞‡∏ö‡∏Å ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤<br/>
              ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤ 30000 ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢
            </p>
          )}
        </div>

        <!-- Contact -->
        <div>
          <h3 class="font-semibold text-gray-800 text-base mb-3">
            {isEN ? "Contact" : "‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠"}
          </h3>

          {isEN ? (
            <p class="text-medium text-gray-600 leading-relaxed mb-6">
              Phone: 084-826-3345<br/>
              Email: bederlyinfo@gmail.com
            </p>
          ) : (
            <p class="text-medium text-gray-600 leading-relaxed mb-6">
              ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: 084-826-3345<br/>
              ‡∏≠‡∏µ‡πÄ‡∏°‡∏•: bederlyinfo@gmail.com
            </p>
          )}

          {isEN ? (
            <p class="font-semibold text-medium text-black leading-relaxed">
              We create innovations and<br/>
              technologies to improve the quality of<br/>
              life, for you and your loved ones
            </p>
          ) : (
            <p class="font-semibold text-medium text-black leading-relaxed">
              ‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ<br/>
              ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì<br/>
              ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏Å
            </p>
          )}
        </div>

        <!-- Download buttons -->
        <div class="footer-download flex flex-col md:items-end gap-3 mt-16 md:mt-24">
          <a
            href={googlePlay}
            target="_blank"
            rel="noopener noreferrer"
            class="footer-google-play"
            aria-label={isEN ? "Get it on Google Play" : "‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏ô Google Play"}
          >
            <img src="/googleplay.png" class="h-12 w-auto" alt="Google Play" />
          </a>
          <a
            href={appStore}
            target="_blank"
            rel="noopener noreferrer"
            class="footer-app-store"
            aria-label={isEN ? "Download on the App Store" : "‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏ô App Store"}
          >
            <img src="/Group.png" class="h-12 w-auto" alt="App Store" />
          </a>
        </div>
      </div>

      <!-- Copyright -->
      <div class="mt-12">
        <p class="text-sm text-black font-medium">
          ¬© Copyright {new Date().getFullYear()} | Bederly Co.,Ltd.
        </p>
      </div>
    </div>
  </div>
</footer>

<style>
  /* ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πÇ‡∏ï‡∏£‡πå */
  .footer-google-play img,
  .footer-app-store img {
    display: block;
    max-width: 200px;
  }

  /* Desktop */
  @media (min-width: 768px) {
    footer .grid { align-items: stretch !important; }

    footer .footer-download {
      display: flex;
      flex-direction: column;
      justify-content: flex-end !important;
      align-items: flex-end !important;
      height: 100%;
      margin-top: 4rem !important;
      padding-bottom: 0.5rem;
    }
  }

  /* Mobile */
  @media (max-width: 767.98px) {
    .footer-google-play img,
    .footer-app-store img {
      height: 2.75rem !important;
      width: auto !important;
    }
    footer .footer-download {
      align-items: flex-start !important;
      margin-top: 1rem !important;
    }
  }

  /* ‚≠ê full-width footer */
  #footer .footer-bleed {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
  }

  /* ‚≠ê avoid rounded corners from global CSS */
  #footer,
  #footer * {
    border-radius: 0 !important;
    
  }

    #footer .favicon-logo {
    height: 48px !important;   /* ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
    width: auto !important;
    margin-left: 0 !important; /* ‡πÄ‡∏≠‡∏≤ offset -40px ‡∏≠‡∏≠‡∏Å‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
  }
    
  /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Social */
  #footer-social-icons img {
    width: 20px !important;   /* ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á */
    height: 20px !important;
  }

  #footer-social-icons {
    gap: 12px !important;     /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
  }
</style>
